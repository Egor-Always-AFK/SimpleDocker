## Part1. Готовый докер

#### С помощью команды `docker pull nginx` запулим образ докер

![1.1](img/1.1.PNG)

#### Проверим наличие докера через `docker images`

![1.2](img/1.2.PNG)

#### Запустим контейнер через `docker run -d [image_id|reposixtory]`

![1.3](img/1.3.PNG)

#### Проверим что образ запустился(через `docker ps`)

![1.4](img/1.4.PNG)

#### Посмотрим информацию о контейнере через `docker inspect [image_id|container_name]`

![1.5](img/1.5.PNG)

#### Посмотрим размер контейнера

![1.6](img/1.6.PNG)

#### Посмотрим список замапленных портов

![1.7](img/1.7.PNG)

#### Посмотрим ip контейнера

![1.8](img/1.8.PNG)

#### Остановим работу контейнера(через docker stop [container_id|container_name])

![1.9](img/1.9.PNG)

#### Проверим, что образ остановился(через docker ps)

![1.10](img/1.10.PNG)

#### Запустим докер с портами 80 и 443 через команду `run` и проверим его работоспособность через `docker ps`

![1.11](img/1.11.PNG)

#### Перезапустим докер через команду `docker restart [container_id|container_name]` и проверим его работоспособность через `docker ps`

![1.12](img/1.12.PNG)

#### Стартовая страница nginx по адресу localhost:80

![1.13](img/1.13.PNG)



## Part 2. Операции с контейнерами 

#### Откроем конфигурационный файл nginx.conf в докере(используя `docker exec`)

![2.1](img/2.1.PNG)

#### Создаем на локальной машине файл nginx.conf

![2.2](img/2.2.PNG)

#### Настроим в нем по пути */status/* отдачу страницы статуса сервера **nginx**

![2.3](img/2.3.PNG)

##### P.S. Пришлось закоментить строку *include /etc/nginx/conf.d/.conf* потому, что в противном случае страница */status/* не отображалась

#### Скопируем *nginx.conf*  внутрь докера командой `docker cp`

![2.4](img/2.4.PNG)

#### 	Перезапустим **nginx** внутри докер образа через команду `docker exec`

![2.5](img/2.5.PNG)

#### Проверим, что по адресу [localhost:80/status/](localhost:80/status/) отдаётся страничка со статусом сервера **nginx**

![2.6](img/2.6.PNG)

#### Экспортировать контейнер в файл *container.tar* через команду `docker export`

![2.7](img/2.7.PNG)

![2.8](img/2.8.PNG)

#### Отключим *docker* командой `docker stop`

![2.9](img/2.9.PNG)

#### Удаляем образ командой `docker rmi` 

![2.10](img/2.10.PNG)

#### Удаляем контейнер командой `docker rm`

![2.11](img/2.11.PNG)

#### Импортируем контейнер обратно используя команду `docker import`

![2.12](img/2.12.PNG)

#### Запустим контейнер командой `docker run`

![2.13](img/2.13.PNG)

#### Проверим, что по адресу [localhost:80/status/](localhost:80/status/) отдаётся страница со статусом сервера **nginx**

![2.14](img/2.14.PNG)

## Part  3. Мини веб-сервер

####  Напишем  мини сервер на C и FastCgi, который будет возвращать страницу с надписью *Hello World!*

![3.1](img/3.1.PNG)

#### Напишем свой *nginx.conf*, который будет перенаправлять все запросы с 81 порта на 127.0.0.8080

![3.2](img/3.2.PNG)

#### Запустим написанный мини сервер через spawn-fcgi на порту 8080

- ##### Сначала запулим образ **nginx**

  ![3.3.1](img/3.3.1.PNG)

- ##### Запустим контейнер

  ![3.3.2](img/3.3.2.PNG)

- ##### Скопируем *nginx.conf* и *miniserver.c* в контейнер

  ![3.3.3](img/3.3.3.PNG)

- ##### Подключимся к контейнеру и установим нужные пакеты

  ![3.3.4](img/3.3.4.PNG)
  
  ![3.3.5](img/3.3.5.PNG)
  
  ![3.3.6](img/3.3.6.PNG)

- ##### Запустим сервер

  ![3.3.7](img/3.3.7.PNG)

#### Проверим, что в браузере по [localhost:81](localhost:81) возвращается страница написанная нами

![3.4](img/3.4.PNG)

## Part 4. Свой докер

#### Создаём докерфайл

![4.1](img/4.1.PNG)

#### Создадим скрипт, выполняющий роль *entrypoint*

![4.2](img/4.2.PNG)

#### Соберём образ через `docker build` при этом указав имя

![4.3](img/4.3.PNG)

#### Проверим через `docker images`, что всё собралось как надо

![4.4](img/4.4.PNG)

#### Запустим собранный докер с маппингом 81 порта на 80 порт на локальной машине и маппингом папки *./nginx* внутрь контейнера по адресу, где лежат конфигурационные файлы

#### ![4.5](img/4.5.PNG)

#### Проверим что всё успешно работает пройдя по странице [localhost:81](localhost:81)

![4.6](img/4.6.PNG)

#### Выключим контейнер и допишем в *nginx.conf* проксирование странички ***/status***, по которой мы будем отдавать статус nginx

![4.7](img/4.7.PNG)

#### Снова запустим сервер и заглядываем в браузер

![4.8](img/4.8.PNG)

![4.9](img/4.9.PNG)

## Part 5. Dockle

#### Сначала установим **Dockle**

![5.1](img/5.1.PNG)

![5.2](img/5.2.PNG)

#### Проверим образ

![5.3](img/5.3.PNG)

#### После исправлений получилось это

![5.4](img/5.4.PNG)

## Part 6. Базовый Docker Compose

#### Для начала напишем(перепишем) скрипт для *entrypoint*, чтобы второй контейнер не завершал работу после `docker-compose up`

![6.1](img/6.1.PNG)

#### Перепишем *nginx.conf* для проксирования

![6.2](img/6.2.PNG)

#### Напишем простой *docker-compose.yml*

![6.3](img/6.3.PNG)

#### Билдим всё это командой `docker-compose build`

![6.4](img/6.4.PNG)

#### Запускаем контейнеры командой `docker-compose up`

![6.5](img/6.5.PNG)

#### Смотрим странички в браузере

![6.6](img/6.6.PNG)

![6.7](img/6.7.PNG)
